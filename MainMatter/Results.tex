\chapter{Experimentaci\'on y resultados}\label{chapter:results}

En este cap\'itulo se muestran los resultados de la experimentaci\'on realizada con el esquema de restauraci\'on propuesto en el Cap\'itulo \ref{chapter:scheme}, sobre una serie de im\'agenes digitales tomadas de ciertas colecciones de inter\'es. La implementaci\'on usada es la presentada en el Cap\'itulo \ref{chapter:code}, donde adem\'as se sugiri\'o la estrategia de realizar restauraciones consecutivas que aprovechan la restauraci\'on anterior. La efectividad de la estrategia mencionada se mide de conjunto con la calidad de las restauraciones. Con el objetivo de establecer comparaciones, se realizaron otros dos tipos de restauraciones sobre las mismas im\'agenes. Para distinguir del resto la restauraci\'on propuesta en este trabajo, se usan en su lugar las siglas \SOP/ a modo de abreviatura.

Como primera restauraci\'on de referencia se cuenta con el trabajo realizado por Alexandru Telea en 2004 \cite{telea2004image}. Como se mencion\'o brevemente en la Introducci\'on, esta restauraci\'on se basa en el m\'etodo \textit{fast marching}. La idea principal es propagar la informaci\'on desde la frontera de las zonas incompletas hacia su interior, completando cada p\'ixel usando un promedio con pesos de los elementos en su vecindad de radio dado. Una vez que se restaura un p\'ixel, se mueve al siguiente usando el m\'etodo \textit{fast marching}. Para referirse a esta restauraci\'on se usan las siglas \TELEA/ en su lugar.

El segundo tipo de restauraci\'on se trata del desarrollado por los autores Bertalmio, Marcelo, Andrea L. Bertozzi, y Guillermo Sapiro alrededor del año 2001 \cite{bertalmio2001navier}. Se debe recordar que este trabajo est\'a basado en las ecuaciones en derivadas parciales (\textbf{EDP}) de la din\'amica de fluidos. Considerándose una heur\'istica, la estrategia es viajar por los bordes de las zonas completas hacia las zonas incompletas. Se siguen las \textit{isofotos}\footnote{Curvas o contornos que conectan puntos con igual brillo o intensidad.} en la medida que coincidan con los vectores gradientes de la frontera de la subregi\'on que se va a restaurar. Para ello se emplean algunos m\'etodos de la din\'amica de fluidos. Una vez obtenido el conjunto de puntos a restaurar, los mismos se completan con valores que reducen la varianza m\'inima en su vecindad de radio dado. An\'alogamente, para abreviar el nombre de este esquema, se usa \NS/ en su lugar.

Las implementaciones de ambas se encuentran en forma de herramienta de \texttt{OpenCV} lo que facilit\'o su aplicaci\'on. El m\'etodo de \texttt{OpenCV}, \texttt{cv2.inpainting}, recibe 4 par\'ametros: la imagen a restaurar, la m\'ascara que define los p\'ixeles faltantes, el param\'etro entero \texttt{radius} y el par\'ametro \texttt{flag}. Para realizar una restauraci\'on del tipo \TELEA/ se usa \texttt{cv2.INPAINT\_TELEA} como valor del par\'ametro \texttt{flag}. En cambio si se desea usar \NS/ debe asignarse \texttt{cv2.INPAINT\_NS}. El valor del par\'ametro \texttt{radius} define el valor del radio de vecindad a usar en \TELEA/ o \NS/ tal como se resumi\'o en sus breves descripciones.

La experimentaci\'on, en este trabajo, se divide en dos casos de estudio. En el primer caso se trabaja con im\'agenes conocidas. Es decir, cada imagen original se corrompe intencionalmente, y se realizan las restauraciones sobre las im\'agenes corruptas. Finalmente tomando las imagenes restauradas, cada una de ellas se compara con la original usando determinada m\'etrica. La m\'etrica seleccionada es la medida \PSNR/ \cite{korhonen2012peak}, la cual para dos im\'agenes $I$ y $C$ se define como sigue:
\begin{equation}
	\PSNR/(I, C) = 10 \log_{10} \left(\frac{\textbf{MAX}^2_I}{\textbf{MCE}(I, C)}\right)
\end{equation}
donde $\textbf{MAX}_I$ es el mayor valor que puede tomar alg\'un p\'ixel de la imagen $I$ (por lo general es 255), y la funci\'on $\textbf{MCE}$ es el error cuadr\'atico medio que se calcula como:
\begin{equation}
	\textbf{MCE}(I, C) = \frac{1}{ab}\sum_{i=1}^{a}\sum_{j=1}^{b}[I(i, j) - C(i, j)]^2
\end{equation}
donde $a \times b$ es la dimensi\'on de ambas im\'agenes. Por ejemplo, si se tiene un error pequeño como $\textbf{MCE}(I, C) = 50$, entonces: $$\PSNR/(I, C) = 10 \log_{10} \left(\frac{\textbf{MAX}^2_I}{50}\right) \approx 31.14$$ cuando se trata de de p\'ixeles en el rango est\'andar de $[0,\;255]$. En cambio, para un error mucho mayor como $\textbf{MCE}(I, C) = 5000$, resulta en $$\PSNR/(I, C) = 10 \log_{10} \left(\frac{\textbf{MAX}^2_I}{5000}\right) \approx 11.14$$ esto significa que la m\'etrica \PSNR/ de dos im\'agenes es inversamente proporcional a su error cuadr\'atico medio. En sentido general, altos valores de $\PSNR/(I, C)$ indican que $C$ es una reconstrucción fiel a $I$. Esta medida tambi\'en se encuentra implementada de forma eficiente en \texttt{OpenCV}, mediante la funci\'on \texttt{cv2.PSNR} que recibe como par\'ametros las matrices de las im\'agenes.

En el segundo caso de estudio se trabaja con im\'agenes que inicialmente cuentan con zonas incompletas, con lo cual se desconoce la imagen real. En este escenario no es posible utilizar m\'etricas para medir la calidad de las restauraciones. Por lo tanto todo tipo de consideraciones sobre los resultados ser\'an meramente visuales y subjetivas. Sin embargo, las restauraciones \TELEA/ y \NS/ que ya son conocidas y han sido utilizadas para resolver dis\'imiles problem\'aticas, ser\'an de mucha utilidad en esta situaci\'on. La intenci\'on en este caso de estudio tambi\'en es analizar las ventajas y desventajas de la restauraci\'on \SOP/ en el campo de las  im\'agenes medicas.

\section{Caso de estudio 1: Restauraci\'on conociendo la imagen original}

Descripci\'on general del experimento:
\begin{itemize}
	\item Las im\'agenes a utilizar son tomadas de la conocida colecci\'on de \textit{Berkeley} \cite{besser1990visual}, en escala de grises y con mediana o pequeña resoluci\'on.
	\item Se consideraron 26 im\'agenes, de ellas:
	\begin{itemize}
		\item Conforman el grupo (A): 12 im\'agenes de dimensi\'on $512 \times 512$.
		\item Conforman el grupo (B): 14 im\'agenes, 11 de dimensi\'on $312 \times 418$, y 3 de $418 \times 312$.
	\end{itemize}
	\item Las m\'ascaras utilizadas para generar las im\'agenes corruptas son las mismas para las im\'agenes de igual dimensión. Ver figura \ref{fig:mask_map}.
	\begin{figure}[H]
		\centering
		\subfigure[$512 \times 512$]{\includegraphics[scale=0.25]{Experiments/Berkeley/mask_512_512.tif}}\quad
		\subfigure[$321 \times 481$]{\includegraphics[scale=0.25]{Experiments/Berkeley/mask_481_321.jpg}}\quad
		\subfigure[$481 \times 321$]{\includegraphics[scale=0.25]{Experiments/Berkeley/mask_321_481.jpg}}
		\caption{M\'ascaras correspondientes a cada una de las respectivas dimensiones que pueden tomar las im\'agenes.}
		\label{fig:mask_map}
	\end{figure}
	Las m\'ascaras se generaron de manera aleatoria, cada p\'ixel se seleccion\'o como corrupto con probabilidad $4/5$ (ver figura \ref{fig:mask_zoom}). Como resultado, aquellos p\'ixeles donde debe realizarse la restauraci\'on representan aproximadamente el 80\% de la m\'ascara. Por lo tanto despu\'es de aplicada, la imagen corrupta resultante solo contiene un 20\% de la informaci\'on original.
	\begin{figure}[H]
		\centering
		\begin{tikzpicture}[x=.00048828125\textwidth, y=.00048828125\textwidth, spy using outlines]
			\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.25\textwidth]{Experiments/Berkeley/mask_512_512.tif}};
			\spy[red,draw,height=0.25\textwidth,width=0.25\textwidth,magnification=32,connect spies] on (300, 400) in node at (1024, 256);
		\end{tikzpicture}
		\caption{Subregi\'on ampliada de la m\'ascara de dimensi\'on $512 \times 512$. P\'ixeles blancos (valor 255) indican p\'ixeles faltantes en la imagen donde se aplique.}
		\label{fig:mask_zoom}
	\end{figure}
	
	\item Se realizaron 3 tipos diferentes de restauraciones, de la siguiente forma:
	\begin{enumerate}
		\item Restauraci\'on \SOP/ utilizando la estrategia de restauraciones consecutivas:
		\begin{table}[H]
			\centering
			\begin{tabular}{|c|cccc|}
				\hline
				Iteraci\'on & $K$ & $\sqrt{n}$ & $B$ & $\epsilon$ \\\hline
				1 & $10$ & $5$ & $6$ & $10^4$\\
				2 & $10$ & $4$ & $7$ & $10^6$\\
				3 & $10$ & $4$ & $8$ & $10^8$\\\hline
			\end{tabular}
			\caption{Par\'ametros para el grupo (A).}
		\end{table}
		\begin{table}[H]
			\centering
			\begin{tabular}{|c|cccc|}
				\hline
				Iteraci\'on & $K$ & $\sqrt{n}$ & $B$ & $\epsilon$ \\\hline
				1 & $10$ & $6$ & $6$ & $10^4$\\
				2 & $10$ & $5$ & $7$ & $10^6$\\
				3 & $10$ & $5$ & $8$ & $10^8$\\\hline
			\end{tabular}
			\caption{Par\'ametros para el grupo (B).}
		\end{table}
		\item Restauraci\'on \TELEA/ con radio de vecindad $8$, para ambos grupos.
		\item Restauraci\'on \NS/ con radio de vecindad $8$, para ambos grupos.
	\end{enumerate}
	\item La m\'etrica a usar para comparar los resultados de las diferentes restauraciones es la medida \PSNR/ \cite{korhonen2012peak}.
\end{itemize}

\input{Experiments/BerkeleyA}
\input{Experiments/BerkeleyB}
A continuaci\'on se muestran los resultados del primer experimento en las tablas \ref{tab:BerkeleyA} y \ref{tab:BerkeleyB}. En ambas tablas se resaltan por cada una de sus filas, el mayor (de color azul) y el menor valor (de color rojo) que alcanz\'o la m\'etrica.

\BerkeleyA{Medida \PSNR/ de los tres tipos de restauraciones en el grupo (A).}{teal}{red}
Como se puede apreciar en la tabla \ref{tab:BerkeleyA}, para todas las im\'agenes del grupo (A), la restauraci\'on de mejor calidad seg\'un la m\'etrica \PSNR/ es \SOP/ con la estrategia de restauraciones consecutivas. En cambio, la de menos calidad resulta la restauraci\'on de referencia \TELEA/. Por otro lado, \NS/ a pesar de que muestra altos valores de la m\'etrica, tambi\'en queda por debajo de la iteraci\'on 3 de \SOP/, y no muy por encima de la iteraci\'on inicial. El caso de la imagen \texttt{house.tif} (ver figura \ref{fig:house.tif}) es donde se alcanz\'o la mayor calidad de restauraci\'on con \SOP/, y con la imagen \texttt{walkbridge.tif} (ver figura \ref{fig:walkbridge.tif}) se obtuvo la peor calidad en este grupo. Ahora bien, analizando los datos de la tabla \ref{tab:BerkeleyA_diffs} es posible observar como, en promedio, la segunda iteraci\'on aumenta la m\'etrica notablemente respecto a la primera iteraci\'on. De igual forma, pero en menor medida sucede con la tercera y la segunda. Los resultados muestran que la estrategia de restauraciones \SOP/ consecutivas es efectiva, sobre todo una segunda restauraci\'on es casi necesaria. Realizar 3 o m\'as depender\'a de las necesidades y poder de c\'omputo del usuario que considere oportuno y ventajoso ejecutarlas. 

\BerkeleyAdiffs{Diferencias entre promedios de las medidas \PSNR/ en el grupo (A).}

\newcommand\showBerkeleyRestaurations[2]{
\subfigure[Imagen Original]{\includegraphics[width=0.32\linewidth]{Experiments/Berkeley/#1.#2}}
\subfigure[Imagen Corrupta]{\includegraphics[width=0.32\linewidth]{Experiments/Berkeley/#1_corrupted.#2}}\\
\subfigure[\TELEA/]{\includegraphics[width=0.32\linewidth]{Experiments/Berkeley/#1_cv2_TELEA.#2}}
\subfigure[\NS/]{\includegraphics[width=0.32\linewidth]{Experiments/Berkeley/#1_cv2_NS.#2}}\\
\subfigure[Iteraci\'on 1]{\includegraphics[width=0.32\linewidth]{Experiments/Berkeley/#1_iteration_1.#2}}
\subfigure[Iteraci\'on 2]{\includegraphics[width=0.32\linewidth]{Experiments/Berkeley/#1_iteration_2.#2}}
\subfigure[Iteraci\'on 3]{\includegraphics[width=0.32\linewidth]{Experiments/Berkeley/#1_iteration_3.#2}}
}

\begin{figure}[H]
	\centering
	\showBerkeleyRestaurations{house}{tif}
	\caption{Restauraciones para la versi\'on corrupta de la imagen \texttt{house.tif}.}
	\label{fig:house.tif}
\end{figure}

\begin{scriptsize}
	*Todas las im\'agenes del grupo (A) y sus restauraciones se encuentran en una carpeta adjunta a este documento.
\end{scriptsize}

\begin{figure}[H]
	\centering
	\showBerkeleyRestaurations{walkbridge}{tif}
	\caption{Restauraciones para la versi\'on corrupta de la imagen \texttt{walkbridge.tif}.}
	\label{fig:walkbridge.tif}
\end{figure}

\BerkeleyB{Medida \PSNR/ de los tres tipos de restauraciones para el grupo (B).}{teal}{red}

Los resultados del experimento con el grupo de im\'agenes (B) en la tabla \ref{tab:BerkeleyB} muestran en general una menor medida \PSNR/ respecto al grupo (A). Se debe recordar que la resoluci\'on de todas las im\'agenes de (B) es menor en comparaci\'on con el grupo (A). Por otro lado, para el caso de (B), en la mayor\'ia de sus im\'agenes existen objetos con mucho nivel de detalle en planos alejados, en cambio, en (A) la tendencia es contener objetos en primer plano. Sin embargo, las diferencias entre los 3 tipos de restauraciones se mantuvieron de forma similar. La iteraci\'on 3 de \SOP/ es en general la de mayor medida \PSNR/, aunque en esta ocasión no ocurrió siempre, ya que en el caso de la imagen \texttt{im16.jpg} la restauraci\'on \NS/ fue la mejor. Se puede apreciar tambi\'en que en la imagen \texttt{im19.jpg} la iteraci\'on 3 de \SOP/ fue contraproducente, pues disminuy\'o la métrica con respecto a la segunda. Nuevamente, \TELEA/ arroj\'o los peores resultados de la m\'etrica en general, sin dejar de destacar que la primera restauración \SOP/ fue la peor en 3 im\'agenes. En cuanto a las diferencias entre los promedios de la tabla \ref{tab:BerkeleyB_diffs}, se confirma la efectividad de la segunda restauraci\'on \SOP/ y de la estrategia en general. Tambi\'en se tiene que la brecha entre \NS/ y la primera iteraci\'on de \SOP/ es mayor con respecto a la del grupo (A), lo que implica la necesidad de hacer restauraciones \SOP/ consecutivas. La imagen donde se observaron las mejores m\'etricas fue \texttt{im24.jpg} (ver figura \ref{fig:im24.jpg}), como se puede notar se trata de un objeto (ping\"uino) en un plano cercano y con poco detalle. El caso de las peores m\'etricas fue la imagen \texttt{im16.jpg} (ver figura \ref{fig:im16.jpg}), la cual tiene un objeto (caballo) en el fondo, y le rodea un paisaje con muchos detalles.

\BerkeleyBdiffs{Diferencias entre promedios de las medidas \PSNR/ en el grupo (B).}

\begin{scriptsize}
	*Todas las im\'agenes del grupo (B) y sus restauraciones se encuentran en una carpeta adjunta a este documento.
\end{scriptsize}

\begin{figure}[h]
	\centering
	\showBerkeleyRestaurations{im24}{jpg}
	\caption{Restauraciones para la versi\'on corrupta de la imagen \texttt{im24.jpg}.}
	\label{fig:im24.jpg}
\end{figure}

\begin{figure}[h]
	\centering
	\showBerkeleyRestaurations{im16}{jpg}
	\caption{Restauraciones para la versi\'on corrupta de la imagen \texttt{im16.jpg}.}
	\label{fig:im16.jpg}
\end{figure}

Finalmente, haciendo un an\'alisis conjunto de los resultados del experimento en ambos grupos (A) y (B), se emiten las siguientes consideraciones. Para el tipo de m\'ascara escogido, la restauraci\'on \SOP/ es eficaz, mejor que \TELEA/ en el caso de la restauraci\'on simple, y mejor que \NS/ cuando se llega a la tercera restauraci\'on consecutiva. Lo anterior muestra a su vez que la estrategia de restauraciones consecutivas propuesta en el ep\'igrafe \ref{sec:module_how_to_use} es igualmente efectiva. En cuanto a la selecci\'on de los par\'ametros del esquema, se aprecia que con valores relativamente pequeños para el lado del parche $\sqrt{n}$ y el radio de vecindad $B$ se obtuvieron en general altos valores de la m\'etrica \PSNR/. Debe recordarse que las im\'agenes corruptas solo contienen el 20\% de su informaci\'on original. La misma, al estar distribuida de forma uniforme por toda la imagen (ver figura \ref{fig:mask_zoom}) aumenta la posibilidad de que cada parche contenga alg\'un p\'ixel con informaci\'on real, lo cual es una condici\'om favorable para el algoritmo \ref{al:PRA}. Surge la idea de, en cambio de una m\'ascara aleatoria, utilizar una m\'ascara predeterminada que siga alg\'un patr\'on que garantice que todos los parches contengan al menos un p\'ixel no faltante. Lo anterior puede resultar \'util como estrategia de compresi\'on de im\'agenes, incluso se pudiera determinar el patr\'on de la m\'ascara necesario para una raz\'on de compresi\'on deseada.

\section{Caso de estudio 2: Restauraci\'on en im\'agenes de Colposcop\'ia}
Descripci\'on general del experimento:
\begin{itemize}
	\item En este caso se experimenta con im\'agenes de colposcop\'ia. Una colposcop\'ia es un examen visual que se realiza al cuello del \'utero de la mujer, tomando im\'agenes del mismo usando un colposcopio (instrumento o\'ptico preparado para este tipo de examen que monitorea determinados par\'ametros). Al inicio del proceso se aplica una solución salina con el objetivo de eliminar las secreciones del cérvix y revelar los vasos sanguíneos. Soluciones de ácido acético se aplican para identificar anomalías epiteliales que se expresan a través de una coloración blanca. Sin embargo, su diagnóstico se ve afectado por la aparición de regiones especulares, en las que se concentra el reflejo de la fuente de luz utilizada al realizar la prueba \cite{dgomez2018tesis}. Precisamente estas zonas son las que se asumen como parte faltante de la imagen y mediante su restauraci\'on se logran eliminar.
	
	\item Se seleccionaron 10 im\'agenes todas a color, de ellas:
	\begin{itemize}
		\item Conforman el grupo (C): 5 im\'agenes de dimensi\'on $480 \times 720$.
		\item Conforman el grupo (D): 5 im\'agenes de dimensi\'on $480 \times 480$.
	\end{itemize}
	
	\item Cada imagen tiene asociada una m\'ascara que define las regiones especulares que se desean eliminar. Estas m\'ascaras fueron tomadas de trabajos anteriores, las cuales se obtuvieron mediante el uso de filtros que detectan los p\'ixeles de brillo intenso.
	
	\item Se realizaron 3 tipos diferentes de restauraciones, de la siguiente forma:
	\begin{enumerate}
		\item Restauraci\'on \SOP/ utilizando la estrategia de restauraciones consecutivas:
		\begin{table}[H]
			\centering
			\begin{tabular}{|c|cccc|}
				\hline
				Iteraci\'on & $K$ & $\sqrt{n}$ & $B$ & $\epsilon$ \\\hline
				1 & $10$ & $5$ & $6$ & $10^4$\\
				2 & $10$ & $4$ & $7$ & $10^6$\\
				3 & $10$ & $4$ & $8$ & $10^8$\\\hline
			\end{tabular}
			\caption{Par\'ametros para el grupo (C).}
			\label{tab:params_c}
		\end{table}
		\begin{table}[H]
			\centering
			\begin{tabular}{|c|cccc|}
				\hline
				Iteraci\'on & $K$ & $\sqrt{n}$ & $B$ & $\epsilon$ \\\hline
				1 & $10$ & $16$ & $10$ & $10^4$\\
				2 & $10$ & $8$ & $10$ & $10^6$\\\hline
			\end{tabular}
			\caption{Par\'ametros para el grupo (D).}
		\end{table}
		\item Restauraci\'on \TELEA/ con radio de vecindad $8$, para ambos grupos.
		\item Restauraci\'on \NS/ con radio de vecindad $8$, para ambos grupos.
	\end{enumerate}
	\item Para las im\'agenes de colposcop\'ia con brillo no es posible usar alguna m\'etrica de calidad, pues se desconoce la imagen real. Todas las consideraciones ser\'an visuales y fruto de la comparaci\'on con las restauraciones \TELEA/ y \NS/.  
\end{itemize}

\qquad

Se comienza analizando primeramente los resultados del experimento con el grupo (C), las restauraciones de dos im\'agenes de dicho grupo se muestran en las figuras \ref{fig:5-1.bmp} y \ref{fig:48-1.bmp}. Como se puede observar, las restauraciones de referencia \TELEA/ y \NS/ logran resultados con buena calidad visual, eliminando por completo las zonas especulares. Ambas restauraciones resultan muy \'utiles en este escenario debido a sus propios esquemas de restauraci\'on descritos al inicio de este cap\'itulo. Debe recordarse que ambos exploran de forma eficiente los bordes de las zonas incompletas y propagan la información hacia su interior. Cuando los bordes son regulares y continuos, los m\'etodos \TELEA/ y \NS/ son m\'as efectivos. Precisamente, las m\'ascaras asociadas a cada imagen cumplen con la propiedad anteriormente mencionada (ver figura \ref{fig:colposcopy_masks_c}).

\begin{figure}[H]
	\centering
	\subfigure[Imagen \texttt{5-1.bmp}]{\includegraphics[width=0.4\linewidth]{Experiments/Colposcopy/5-1.bmp}}
	\subfigure[M\'ascara de \texttt{5-1.bmp}]{\includegraphics[width=0.4\linewidth]{Experiments/Colposcopy/5-1_mask.bmp}}\\
	\subfigure[Imagen \texttt{48-1.bmp}]{\includegraphics[width=0.4\linewidth]{Experiments/Colposcopy/48-1.bmp}}
	\subfigure[M\'ascara de \texttt{48-1.bmp}]{\includegraphics[width=0.4\linewidth]{Experiments/Colposcopy/48-1_mask.bmp}}
	\caption{M\'ascaras usadas para eliminar las zonas especulares de sus respectivas im\'agenes del grupo (C).}
	\label{fig:colposcopy_masks_c}
\end{figure}

\newcommand\showColposcopyRestaurations[2]{
\subfigure[Imagen colposc\'opica]{\includegraphics[width=0.32\linewidth]{Experiments/Colposcopy/#1.#2}}
\subfigure[\TELEA/]{\includegraphics[width=0.32\linewidth]{Experiments/Colposcopy/#1_cv2_TELEA.#2}}
\subfigure[\NS/]{\includegraphics[width=0.32\linewidth]{Experiments/Colposcopy/#1_cv2_NS.#2}}
\subfigure[Iteraci\'on 1]{\includegraphics[width=0.32\linewidth]{Experiments/Colposcopy/#1_iteration_1.#2}}
\subfigure[Iteraci\'on 2]{\includegraphics[width=0.32\linewidth]{Experiments/Colposcopy/#1_iteration_2.#2}}
\subfigure[Iteraci\'on 3]{\includegraphics[width=0.32\linewidth]{Experiments/Colposcopy/#1_iteration_3.#2}}
}

\begin{figure}[H]
	\centering
	\showColposcopyRestaurations{5-1}{bmp}
	\caption{Restauraciones de la imagen colposc\'opica \texttt{5-1.bmp}.}
	\label{fig:5-1.bmp}
\end{figure}

\begin{figure}[H]
	\centering
	\showColposcopyRestaurations{48-1}{bmp}
	\caption{Restauraciones de la imagen colposc\'opica \texttt{48-1.bmp}.}
	\label{fig:48-1.bmp}
\end{figure}

\begin{scriptsize}
	*Todas las im\'agenes del grupo (C) y sus restauraciones se encuentran en una carpeta adjunta a este documento.
\end{scriptsize}

En cuanto a la restauraci\'on \SOP/, queda en evidencia que no funcion\'o en ninguna de las im\'agenes. Las segundas y terceras iteraciones de \SOP/ fallan igualmente pues estas utilizan los resultados de la restauraci\'on anterior. Urge responder a la pregunta de por qu\'e no fue efectivo el esquema de ordenamiento suave de parches en este escenario.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}[x=.00075\linewidth,y=.00075\linewidth,spy using outlines={every spy on node/.append style={thick}}]
		\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.54\textwidth]{Experiments/Colposcopy/48-1_corrupted.bmp}};
		\draw[-,white,very thin] (588, 100) rectangle ++(4,4) (603,  97) rectangle ++(4,4) (589, 110) rectangle ++(4,4);
		\draw[-,white,very thin] (608, 107) rectangle ++(4,4) (593, 121) rectangle ++(4,4) (603, 117) rectangle ++(4,4);
		\draw[-,white,very thin] (616, 118) rectangle ++(4,4) (595, 130) rectangle ++(4,4) (607, 128) rectangle ++(4,4);
		\draw[-,white,very thin] (597, 107) rectangle ++(4,4) (595, 140) rectangle ++(4,4) (619, 129) rectangle ++(4,4);
		\draw[-,white,very thin] (605, 141) rectangle ++(4,4) (613, 140) rectangle ++(4,4) (602, 152) rectangle ++(4,4);
		\draw[-,blue,very thin] (582, 117) rectangle ++(4,4) (580, 125) rectangle ++(4,4) (579, 131) rectangle ++(4,4);
		\draw[-,blue,very thin] (583, 141) rectangle ++(4,4) (623, 104) rectangle ++(4,4) (628, 108) rectangle ++(4,4);
		\draw[-,blue,very thin] (632, 116) rectangle ++(4,4) (633, 127) rectangle ++(4,4) (632, 136) rectangle ++(4,4);
		\spy[red,circle,height=0.36\textwidth,width=0.36\textwidth,magnification=6,connect spies] on (608, 128) in node at (1050, 240);
	\end{tikzpicture}
	\caption{Imagen de colposcop\'ia \texttt{48-1.bmp} con su m\'ascara aplicada (en negro). En la ampliaci\'on los cuadros de bordes blancos representan los parches de $5 \times 5$ vac\'ios, y de color azul aquellos que tienen informaci\'on.}
	\label{fig:colposcopy_zoom}
\end{figure}

 En primer lugar se tienen en cuenta los par\'ametros utilizados (ver tabla \ref{tab:params_c}). En la primera iteraci\'on se usan $K=10$, $\sqrt{n}=5$ y $B=6$. Por lo tanto los parches tienen dimensi\'on $5 \times 5$ y exploran su vecindad de $6 \times 6$. Tal y como muestra la figura \ref{fig:colposcopy_zoom}, en el caso de la imagen \texttt{48-1.bmp} existe una gran cantidad de \textit{parches vac\'ios}\footnote{Enti\'endase por \textit{parche vac\'io}, aquel que todos sus p\'ixles son faltantes.} y todos (o casi todos) los parches en sus vecindades tambi\'en lo son. Lo anterior se debe a que las zonas de p\'ixeles faltantes son compactas y no contienen p\'ixeles con informaci\'on en su interior, lo que implica que la mayor\'ia de p\'ixeles a restaurar son centro de parches vac\'ios. Las consecuencias de tener muchos parches vac\'ios es que se pierde la garant\'ia de obtener una ordenaci\'on suave de los mismos mediante el algoritmo \ref{al:PRA}. Por la definici\'on de $\omega$ en (\ref{eq:omega}) se tiene que si $\x$ es un parche vac\'io, el valor de $\omega(\x,\; \x')$ es el mismo para todo parche $\x'$. Entonces cuando se resuelve \TSP/, la posici\'on donde se coloquen los parches vac\'ios no altera el costo del camino. Si no se tiene seguridad de que la ordenaci\'on es suave, entonces aplicar el operador de suavidad $H$ pierde su objetivo, y los p\'ixeles que se recuperan mediante dicho operador tendr\'an valores pr\'acticamente aleatorios, como se muestran en los resultados previos.
 
 Por lo anteriormente expuesto, los parches vac\'ios son un caso problem\'atico para el esquema de restauraci\'on presentado en este trabajo. Se debe escoger entonces el valor de $\sqrt{n}$ en pos de minimizar la cantidad de parches vac\'ios. En el caso de las im\'agenes del grupo (C), no solo $\sqrt{n} = 5$ es insuficiente, sino que la mayor\'ia de p\'ixeles a recuperar son centros de parches vac\'ios. Se realiz\'o un pequeño experimento con la propia imagen \texttt{48-1.bmp}, aumentando el valor de $\sqrt{n}$ a 16 para realizar la restauraci\'on nuevamente.
 \begin{figure}[H]
 	\centering
 	\subfigure[Restauraci\'on con $\sqrt{n} = 6$]{\begin{tikzpicture}[x=.000625\linewidth, y=.000625\linewidth]
 		\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.45\linewidth]{Experiments/Colposcopy/48-1_iteration_1.bmp}};
 		\draw[-,red,very thick] (320, 180) circle (160);
 	\end{tikzpicture}}
 	\subfigure[Restauraci\'on con $\sqrt{n} = 16$]{\begin{tikzpicture}[x=.000625\linewidth, y=.000625\linewidth]
 		\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.45\linewidth]{Experiments/Colposcopy/48-1_r1.bmp}};
 		\draw[-,red,very thick] (320, 180) circle (160);
 	\end{tikzpicture}}
 	\caption{Imagen \texttt{48-1.bmp} restaurada con \SOP/ usando distintos tamaños de los parches. Señalada en rojo la zona donde se notan las diferencias.}
 	\label{fig:patches_diffs}
 \end{figure}
Como se aprecia en la figura \ref{fig:patches_diffs} la nueva restauraci\'on con $\sqrt{n} = 16$ es claramente mejor. Excepto en la franja lateral derecha donde se siguen detectando p\'ixeles mal recuperados. En el resto de la imagen el resultado de la restauraci\'on es alentador. En las zonas mal recuperadas se observa que cada p\'ixel con informaci\'on errónea es precisamente el centro de un parche vac\'io, a\'un con $\sqrt{n} = 16$. Para reducir a 0 la cantidad de parches vac\'ios en el caso de la imagen \texttt{48-1.bmp} se necesita $\sqrt{n} > 32$. El experimento con dicho valor de $\sqrt{n}$ no se pudo llevar a cabo por restricciones de la memoria \textbf{RAM} del equipo de c\'omputo donde se realizaron los experimentos. Se ha de recordar la complejidad espacial del algoritmo calculada en (\ref{eq:spacial_complexity}), donde el valor de $n$ es importante, ya que $\sqrt{n} > 32 \implies n > 1024$.

Otra cuesti\'on a analizar es el hecho de que la complejidad temporal del esquema \SOP/ es independiente de la cantidad de p\'ixeles con desinformaci\'on. Usando el resultado obtenido en (\ref{eq:temporal_complexity}) se concluye que la complejidad temporal de \SOP/ solo depende de el tamaño de la imagen, el tamaño del parche y el tamaño de la vecindad a explorar. A diferencia de las restauraciones \TELEA/ y \NS/, en el caso de \SOP/ toma un tiempo similar restaurar una imagen con 10\% de desinformaci\'on que una con 80\%. Esto sugiere que realizar la restauraci\'on de im\'agenes donde los p\'ixeles faltantes tienden a agruparse y no representan un gran porciento, puede llevarse a cabo en una subregi\'on rectangular que contenga todos los p\'ixeles a recuperar.

\begin{figure}[H]
	\centering
	\subfigure[Imagen \texttt{1.bmp}]{\includegraphics[width=0.3\linewidth]{Experiments/Colposcopy/1.bmp}}
	\subfigure[M\'ascara de \texttt{1.bmp}]{\includegraphics[width=0.3\linewidth]{Experiments/Colposcopy/1_mask.bmp}}\\
	\subfigure[Imagen \texttt{3.bmp}]{\includegraphics[width=0.3\linewidth]{Experiments/Colposcopy/3.bmp}}
	\subfigure[M\'ascara de \texttt{3.bmp}]{\includegraphics[width=0.3\linewidth]{Experiments/Colposcopy/3_mask.bmp}}
	\caption{M\'ascaras usadas para eliminar las zonas especulares de sus respectivas im\'agenes del grupo (D).}
	\label{fig:colposcopy_masks_d}
\end{figure}

Se analizan entonces los resultados del grupo (D). An\'alogamente se muestran las restauraciones de dos de las im\'agenes del grupo. Las m\'ascaras empleadas para eliminar las zonas especulares pueden observarse en la figura \ref{fig:colposcopy_masks_d}. A diferencia del grupo (C), las m\'ascaras del grupo (D) son un poco m\'as ajustadas a las zonas especulares, siendo en este caso m\'as irregulares y delgadas. Se debe recordar que para este grupo el par\'ametro $\sqrt{n} = 16$ es mayor al utilizado para (C). Las restauraciones de las figuras \texttt{1.bmp} y \texttt{3.bmp} se muestran en  las figuras \ref{fig:1.bmp} y \ref{fig:3.bmp}. En cuanto a \TELEA/ y \NS/, estas eliminan las zonas especulares, pero en su lugar tienden a propagar colores que no parecen ser los adecuados. En realidad ambas restauraciones est\'an funcionando como se espera. Al usar m\'ascaras muy ajustadas, cerca de sus bordes se pueden observar p\'ixeles de color negro, azul, verde, entre otros que no concuerdan con el tejido fotografiado (ver figura \ref{fig:3.bmp_color_borders}). Este fen\'omeno se debe a un efecto \'optico de la luz, la cual se divide en varios colores al pasar por el borde de una zona h\'umeda. Se trata de un defecto inherente al colposcopio con que se tom\'o la imagen, el cual debido a cuestiones referentes a su lente, no es capaz de evitar el efecto \'optico mencionado.

\renewcommand\showColposcopyRestaurations[2]{
\subfigure[Imagen colposc\'opica]{\includegraphics[width=0.225\linewidth]{Experiments/Colposcopy/#1.#2}}
\subfigure[\TELEA/]{\includegraphics[width=0.225\linewidth]{Experiments/Colposcopy/#1_cv2_TELEA.#2}}
\subfigure[\NS/]{\includegraphics[width=0.225\linewidth]{Experiments/Colposcopy/#1_cv2_NS.#2}}\\
\subfigure[Iteraci\'on 1]{\includegraphics[width=0.225\linewidth]{Experiments/Colposcopy/#1_iteration_1.#2}}
\subfigure[Iteraci\'on 2]{\includegraphics[width=0.225\linewidth]{Experiments/Colposcopy/#1_iteration_2.#2}}
}

\begin{figure}[H]
	\centering
	\showColposcopyRestaurations{1}{bmp}
	\caption{Restauraciones de la imagen colposc\'opica \texttt{1.bmp}.}
	\label{fig:1.bmp}
\end{figure}

\begin{figure}[H]
	\centering
	\showColposcopyRestaurations{3}{bmp}
	\caption{Restauraciones de la imagen colposc\'opica \texttt{3.bmp}.}
	\label{fig:3.bmp}
\end{figure}

\begin{scriptsize}
	*Todas las im\'agenes del grupo (D) y sus restauraciones se encuentran en una carpeta adjunta a este documento.
\end{scriptsize}

\begin{figure}[H]
	\centering
	\begin{tikzpicture}[x=.0006875\linewidth,y=.0006875\linewidth,spy using outlines={every spy on node/.append style={very thick}}]
		\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.33\linewidth]{Experiments/Colposcopy/3.bmp}};
		\spy[red,circle,height=0.25\textwidth,width=0.25\textwidth,magnification=4,connect spies] on (300, 250) in node at (730, 250);
		\spy[red,circle,height=0.25\textwidth,width=0.25\textwidth,magnification=4,connect spies] on (130, 300) in node at (-250, 300);
	\end{tikzpicture}
	\caption{Coloraciones en el borde de las zonas de brillo de la imagen \texttt{3.bmp}.}
	\label{fig:3.bmp_color_borders}
\end{figure}

Las dos iteraciones de la restauraci\'on \SOP/ muestran unos resultados similares a \TELEA/ y \NS/. A diferencia del grupo (C), donde no se recuperaban los p\'ixeles correctamente, en este caso si completa las zonas acorde a la informaci\'on de sus bordes. Pese a que, como ya se mencion\'o, los bordes contienen p\'ixeles de varios colores, sobre todo rebordes de color oscuro (ver figura \ref{fig:3.bmp_color_borders}). Esto confirma en cierta medida que el valor de $\sqrt{n}$ es determinante en la calidad de la restauraci\'on en im\'agenes donde la informaci\'on faltante se comporta como el brillo de las colposcop\'ias estudiadas. Se hace necesario entonces, contar con un mecanismo que permita estimar el m\'inimo valor de $\sqrt{n}$ que garantice la inexistencia de parches vac\'ios.

\section{Propuestas basadas en los resultados}\label{sec:suggestions}

Los resultados del experimento para el caso de estudio 1 mostraron que la restauraci\'on \SOP/ es efectiva cuando los p\'ixeles de desinformaci\'on est\'an distribuidos de forma tal que la cantidad de parches vac\'ios sea m\'inima. Adem\'as, dado que la complejidad temporal del esquema de restauraci\'on no depende de la cantidad de p\'ixeles incompletos, la potencialidad del algoritmo \ref{al:PRA} se explota al m\'aximo cuando dichos p\'ixeles están distruibuidos a lo largo de la matriz de la imagen de forma uniforme. Teniendo estos factores en cuenta se propone la aplicaci\'on del esquema \SOP/ en las siguientes lineas de investigaci\'on:
\begin{itemize}
	\item Compresi\'on de im\'agenes.
	\item Aumento de la resoluci\'on de im\'agenes.
	\item Eliminaci\'on de ruido en im\'agenes 
\end{itemize}

Para la compresi\'on de im\'agenes se propone el uso de m\'ascaras predefinidas que garanticen la propiedad de no contener parches vac\'ios para valores pequeños de $\sqrt{n}$. Mediante una m\'ascara de este tipo, se comprime la imagen almacenando solo los p\'ixeles señalados por la misma. El archivo de la imagen comprimida debe contener en sus metadatos las dimensiones de la imagen y la m\'ascara usada en la compresi\'on. La descompresi\'on se logra restaurando la imagen original con \SOP/ sobre los p\'ixeles almacenados mediante la m\'ascara con que fueron comprimidos. La m\'ascara debe tener una definici\'on matem\'atica que evite tener que almacenarla como una matriz. Por ejemplo, se define una m\'ascara $t$\textit{-diagonal} $M_t = \{m_{i,j}\}$, tal que\footnote{La notaci\'on $p \mid q$ significa \textit{$p$ divide a $q$} o que \textit{$q$ es m\'ultiplo de $p$}.}:
\begin{equation}
	m_{i, j} = \left\{\begin{array}{rl}
		0 & \mbox{cuando} \quad t \mid (i - j)\\
		255 & \mbox{para el resto} \\
	\end{array}\right.
\end{equation}
De esta forma solo es necesario almacenar el valor de $t$ en los metadatos del archivo comprimido. En la figura \ref{fig:mask_5_diagonal} se ejemplica c\'omo se forma una m\'ascara $5$\textit{-diagonal}. La cantidad de p\'ixeles que selecciona una m\'ascara $t$\textit{-diagonal} de la imagen a comprimir representa aproximadamente $1/t$ de la cantidad inicial. Si la imagen a comprimir $\Y$ tiene dimensi\'on $N_1 \times N_2$ con $N = N_1N_2$, la cantidad de p\'ixeles $N_c$ a los que se reduce la imagen mediante una m\'ascara $t$\textit{-diagonal} de igual dimensi\'on que $Y$, cumple que:
\begin{equation}
	N_c < \frac{N}{t} + 1
\end{equation}
M\'as a\'un, si $t | N_1$ o $t | N_2$, entonces $N_c = \frac{N}{t}$. Por otro lado, cualquier parche con $\sqrt{n} > \frac{t}{2}$ contiene al menos un p\'ixel no faltante cuando se usa una m\'ascara $t$\textit{-diagonal}. En conlusi\'on, mediante este tipo de m\'ascaras podemos comprimir la imagen a una raz\'on de compresi\'on deseada y adem\'as esa raz\'on determina el m\'inimo tamaño de parche para hacer la restauraci\'on.
\begin{figure}[H]
	\centering
	\begin{tikzpicture}[x=3mm, y=3mm, rotate=-90]
		\foreach \i in {0, 5, ..., 15}
			\foreach \j in {0, 5, ..., 15} {
				\fill [black] (\i, \j) rectangle ($(\i, \j)+(1, 1)$);
			}
		\foreach \i in {1, 6, ..., 11}
			\foreach \j in {1, 6, ..., 11} {
				\fill [black] (\i, \j) rectangle ($(\i, \j)+(1, 1)$);
			}
		\foreach \i in {2, 7, ..., 12}
			\foreach \j in {2, 7, ..., 12} {
				\fill [black] (\i, \j) rectangle ($(\i, \j)+(1, 1)$);
			}
		\foreach \i in {3, 8, ..., 13}
			\foreach \j in {3, 8, ..., 13} {
				\fill [black] (\i, \j) rectangle ($(\i, \j)+(1, 1)$);
			}
		\foreach \i in {4, 9, ..., 14}
			\foreach \j in {4, 9, ..., 14} {
				\fill [black] (\i, \j) rectangle ($(\i, \j)+(1, 1)$);
			}
		\draw[step=1,gray,thin] (0,0) grid (16,16);
	\end{tikzpicture}
	\caption{Ejemplo de una m\'ascara $5$\textit{-diagonal} de dimensi\'on $16 \times 16$.}
	\label{fig:mask_5_diagonal}
\end{figure}
Usando una m\'ascara \textit{5-diagonal} las im\'agenes se comprimen a un 20\% de su informaci\'on, y solo es necesario parches de $3 \times 3$ para restaurarla. De esta forma es posible comprimir una imagen de forma considerable y recuperarla no supondr\'a un costo computacional elevado. No obstante, las m\'ascaras $t$\textit{-diagonales} son solo un patr\'on posible que se puede usar para comprimir. Se propone la b\'usqueda y el estudio de otros patrones para m\'ascaras de compresi\'on.

La ampliaci\'on de im\'agenes es un proceso contrario a la compresi\'on. Al ampliar una imagen $\Y$ se debe obtener $\Y'$ de mayores dimensiones que resulta de escalar $\Y$ a un nuevo marco. Por ejemplo, ampliar una imagen de $256 \times 256$ a un marco de $512 \times 512$. La idea de realizar la ampliaci\'on utilizando \SOP/ consiste en colocar los p\'ixeles de $\Y$ dentro de una nueva matriz de dimensiones igual a la ampliaci\'on deseada, conservando la posici\'on relativa de los p\'ixeles. Los p\'ixeles restantes de la nueva matriz se consideran corruptos y se restaura la imagen. Se define ampliaci\'on $2x$ aquella que duplica ambas dimensiones de la imagen. Se define tambi\'en m\'ascara $2x$, que se denota por $M^{2x}$, aquella que se emplea para realizar la ampliaci\'on $2x$. Luego, la ampliaci\'on $\Y'_{2a \times 2b} = \{a'_{i,j}\}$ de $\Y_{a \times b} = \{a_{i,j}\}$ y la m\'ascara $M^{2x}_{2a \times 2b} = \{m_{i, j}\}$ son tales que:
\begin{equation}
	a'_{i, j} = \left\{\begin{array}{rl}
		a_{p, q} & \mbox{si $i = 2p - 1,\; j = 2q - 1$} \\
		0 & \mbox{para el resto} \\
	\end{array}\right.
	\quad
	m_{i, j} = \left\{\begin{array}{rl}
		0 & \mbox{si $i,j$ son impares} \\
		255 & \mbox{para el resto} \\
	\end{array}\right.
\end{equation} 
Al realizar una restauraci\'on sobre $\Y'$ mediante $M^{2x}$ usando \SOP/ se obtendr\'a la ampliaci\'on de $\Y$ deseada. 

En la figura \ref{fig:mask_2x} tenemos un ejemplo de m\'ascara $2x$ de $16 \times 16$. De forma similar se pueden definir las ampliaciones y m\'ascaras $2x$, $3x$, ..., $tx$. En el caso general de una ampliaci\'on $tx$, si $\sqrt{n} \ge t$, se tiene que ning\'un parche es vac\'io. Se propone el estudio de este m\'etodo de ampliaci\'on de im\'agenes para usarlo en ampliaciones a marcos de dimensión arbitraria.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}[x=3mm, y=3mm, rotate=-90]
		\foreach \i in {0, 2, ..., 14}
			\foreach \j in {0, 2, ..., 14} {
				\fill [black] (\i, \j) rectangle ($(\i, \j)+(1, 1)$);
			}
		\draw[step=1,gray,thin] (0,0) grid (16,16);
	\end{tikzpicture}
	\caption{Ejemplo de una m\'ascara $2x$ de dimensi\'on $16 \times 16$.}
	\label{fig:mask_2x}
\end{figure}

Por otro lado se propone la aplicaci\'on de \SOP/ a la eliminaci\'on de ruido en las im\'agenes. Para ello se debe contar con una herramienta que detecte el ruido y genere una m\'ascara que defina al mismo. Mediante dicha m\'ascara se realiza la restauraci\'on y se elimina el ruido. La propia naturaleza del ruido en im\'agenes reúne las propiedades de estar distribuido uniformemente y sin formar grandes zonas de desinformaci\'on.

Los resultados del experimento para el caso de estudio 2 mostraron las desventajas m\'as importantes del esquema \SOP/. Los parches vac\'ios representan un caso problem\'atico, pues sus centros no logran restaurase correctamente. Se debe emplear un valor de $\sqrt{n}$ lo suficientemente grande que minimice la cantidad de parches vac\'ios. Tambi\'en, cuando el \'area a restaurar es pequeña en relaci\'on con la imagen completa, se malgasta mucho tiempo de c\'omputo innecesario. Por lo tanto, una soluci\'on simple es seleccionar una subregi\'on rectangular mas pequeña que contenga todas las zonas a restaurar. Ahora bien, usando ambas consideraciones, tanto el tamaño del parche y la idea de reducir la imagen a una subregi\'on rectangular m\'as pequeña, se puede diseñar una estrategia adaptativa para usar \SOP/ en las im\'agenes de colposcop\'ia.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}[x=.000875\linewidth, y=.000875\linewidth]
	\node[anchor=south west,inner sep=0] (image) at (0, 0) {\includegraphics[width=.63\linewidth]{Experiments/Colposcopy/5-1.bmp}};
	\draw[-,black,ultra thick] (0, 0) rectangle (200, 320);
	\draw[-,black,ultra thick] (200, 0) rectangle (485, 320);
	\draw[-,black,ultra thick] (485, 0) rectangle (720, 250);
	\draw[-,black,ultra thick] (0, 320) rectangle (80, 480);
	\draw[-,black,ultra thick] (80, 320) rectangle (485, 480);
	\draw[-,black,ultra thick] (485, 250) rectangle (720, 480);
	\draw[*-|, red, line width=1pt] (100, 160) -- (-50, 160) node[left, black] {$\boxed{\sqrt{n} = 6}$};
	\draw[*-|, blue, line width=1pt] (342.5, 100) -- (770, 100) node[right, black] {$\boxed{\sqrt{n} = 16}$};
	\draw[*-|, orange, line width=1pt] (200, 400) -- (-50, 400) node[left, black] {$\boxed{\sqrt{n} = 32}$};
	\draw[*-|, violet, line width=1pt] (602.5, 300)-- (770, 300) node[right, black] {$\boxed{\sqrt{n} = 8}$};
	\end{tikzpicture}
	\caption{Ejemplo de estrategia adaptativa para la imagen \texttt{5-1.bmp}}
	\label{fig:adaptative}
\end{figure}

La estrategia consiste en dividir la imagen en subregiones rectangulares, cada una de las cuales ser\'an restauradas de forma independiente usando un tamaño de parche que minimice la cantidad de parches vac\'ios. Un ejemplo se muestra en la figura \ref{fig:adaptative}, de c\'omo subdividir y cu\'al valor de $\sqrt{n}$ a usar en cada subregi\'on rectangular. Se recomienda la implementaci\'on de esta estrategia de conjunto con una herramienta que estime el m\'inimo valor de $\sqrt{n}$ necesario en cada subregi\'on. Tambi\'en, el análisis de sus resultados e investigar posibles modificaciones tales como usar subregiones con solapamiento, entre otras ideas.